<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Stats Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="container">
        <h2>Football Stats Tracker</h2>

        <input type="date" id="weekPicker">
        <input type="text" id="playerName" placeholder="Enter player name">
        <button onclick="addPlayer()">Add Player</button>

        <div id="players"></div>

        <button onclick="window.location.href='summary.html'">Overall Summary</button>
        <button onclick="window.location.href='daily-summary.html?date=' + document.getElementById('weekPicker').value">Daily Summary</button>
    </div>

    <script type="module">

        // Import Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, doc, getDoc, getDocs, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        
const firebaseConfig = {
  apiKey: "AIzaSyBSmR68M_nNvbJwY4rCWpJw6B2AJrh6XwQ",
  authDomain: "aj-stats-tracker.firebaseapp.com",
  projectId: "aj-stats-tracker",
  storageBucket: "aj-stats-tracker.firebasestorage.app",
  messagingSenderId: "78394536850",
  appId: "1:78394536850:web:0ee4edf615d97e7e11874b",
  measurementId: "G-S2RT53LTXX"
};

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);


    // Function to add player
    async function addPlayer() {
        const name = document.getElementById("playerName").value.trim();
        if (name === "") return alert("Please enter a player name.");

        await setDoc(doc(db, "players", name), { name });
        document.getElementById("playerName").value = "";
        renderPlayers();
    }


        async function updateStat(player, stat, change) {
            const date = document.getElementById("weekPicker").value;
            if (!date) return alert("Please select a date.");

            const playerRef = db.collection("stats").doc(`${date}-${player}`);
            const doc = await playerRef.get();
            let data = doc.exists ? doc.data() : { goals: 0, assists: 0, defense: 0, present: true };

            data[stat] = (data[stat] || 0) + change;
            await playerRef.set(data);
            renderPlayers();
        }

       // Function to load players
    async function renderPlayers() {
        const querySnapshot = await getDocs(collection(db, "players"));
        const container = document.getElementById("players");
        container.innerHTML = "";

        querySnapshot.forEach(doc => {
            const player = doc.id;
            container.innerHTML += `
                <div class="player">
                    <span><strong>${player}</strong></span>
                    <button class="minus" onclick="updateStat('${player}', 'goals', -1)">-</button>
                    <button class="plus" onclick="updateStat('${player}', 'goals', 1)">+</button> Goals
                    <button class="minus" onclick="updateStat('${player}', 'assists', -1)">-</button>
                    <button class="plus" onclick="updateStat('${player}', 'assists', 1)">+</button> Assists
                    <button class="minus" onclick="updateStat('${player}', 'defense', -1)">-</button>
                    <button class="plus" onclick="updateStat('${player}', 'defense', 1)">+</button> Defense
                </div>
            `;
        });
        }

        renderPlayers();
    </script>

</body>
</html>
